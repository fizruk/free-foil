<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Language.SOAS.Impl</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">soas-0.2.0: Second-Order Abstract Syntax implemented via Free Foil (a version of SOAS).</span><ul class="links" id="page-menu"><li><a href="src/Language.SOAS.Impl.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Language.SOAS.Impl</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Standard Types</a></li><li><a href="#g:2">Metavariable substitutions</a></li><li><a href="#g:3">Entrypoint</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Functions over Second-Order Abstract Syntax (SOAS)
 represented using scope-safe Haskell types (via Free Foil).</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">type</span> <a href="#t:Term">Term</a> = <a href="Language-SOAS-Impl-Generated.html#t:Term-39-" title="Language.SOAS.Impl.Generated">Term'</a> <a href="Language-SOAS-Syntax-Abs.html#t:BNFC-39-Position" title="Language.SOAS.Syntax.Abs">BNFC'Position</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:Type">Type</a> = <a href="Language-SOAS-Impl-Generated.html#t:Type-39-" title="Language.SOAS.Impl.Generated">Type'</a> <a href="Language-SOAS-Syntax-Abs.html#t:BNFC-39-Position" title="Language.SOAS.Syntax.Abs">BNFC'Position</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:Subst">Subst</a> = <a href="Language-SOAS-Impl-Generated.html#t:Subst-39-" title="Language.SOAS.Impl.Generated">Subst'</a> <a href="Language-SOAS-Syntax-Abs.html#t:BNFC-39-Position" title="Language.SOAS.Syntax.Abs">BNFC'Position</a> '<a href="../free-foil-0.2.0/Control-Monad-Foil-Internal.html#v:VoidS" title="Control.Monad.Foil.Internal">VoidS</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:Constraint">Constraint</a> = <a href="Language-SOAS-Impl-Generated.html#t:Constraint-39-" title="Language.SOAS.Impl.Generated">Constraint'</a> <a href="Language-SOAS-Syntax-Abs.html#t:BNFC-39-Position" title="Language.SOAS.Syntax.Abs">BNFC'Position</a> '<a href="../free-foil-0.2.0/Control-Monad-Foil-Internal.html#v:VoidS" title="Control.Monad.Foil.Internal">VoidS</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:OpTyping">OpTyping</a> = <a href="Language-SOAS-Impl-Generated.html#t:OpTyping-39-" title="Language.SOAS.Impl.Generated">OpTyping'</a> <a href="Language-SOAS-Syntax-Abs.html#t:BNFC-39-Position" title="Language.SOAS.Syntax.Abs">BNFC'Position</a> '<a href="../free-foil-0.2.0/Control-Monad-Foil-Internal.html#v:VoidS" title="Control.Monad.Foil.Internal">VoidS</a></li><li class="src short"><a href="#v:lookupSubst">lookupSubst</a> :: <a href="Language-SOAS-Syntax-Abs.html#t:MetaVarIdent" title="Language.SOAS.Syntax.Abs">MetaVarIdent</a> -&gt; [<a href="Language-SOAS-Impl.html#t:Subst" title="Language.SOAS.Impl">Subst</a>] -&gt; <a href="../base-4.19.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Language-SOAS-Impl.html#t:Subst" title="Language.SOAS.Impl">Subst</a></li><li class="src short"><a href="#v:applySubsts">applySubsts</a> :: <span class="keyword">forall</span> (n :: <a href="../free-foil-0.2.0/Control-Monad-Foil-Internal.html#t:S" title="Control.Monad.Foil.Internal">S</a>). <a href="../free-foil-0.2.0/Control-Monad-Foil-Internal.html#t:Distinct" title="Control.Monad.Foil.Internal">Distinct</a> n =&gt; <a href="../free-foil-0.2.0/Control-Monad-Foil-Internal.html#t:Scope" title="Control.Monad.Foil.Internal">Scope</a> n -&gt; [<a href="Language-SOAS-Impl.html#t:Subst" title="Language.SOAS.Impl">Subst</a>] -&gt; <a href="Language-SOAS-Impl.html#t:Term" title="Language.SOAS.Impl">Term</a> n -&gt; <a href="Language-SOAS-Impl.html#t:Term" title="Language.SOAS.Impl">Term</a> n</li><li class="src short"><a href="#v:isSolutionFor">isSolutionFor</a> :: [<a href="Language-SOAS-Impl.html#t:Subst" title="Language.SOAS.Impl">Subst</a>] -&gt; [<a href="Language-SOAS-Impl.html#t:Constraint" title="Language.SOAS.Impl">Constraint</a>] -&gt; <a href="../base-4.19.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:defaultMain">defaultMain</a> :: <a href="../base-4.19.1.0/System-IO.html#t:IO" title="System.IO">IO</a> ()</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="doc"><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:set -XOverloadedStrings
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:set -XDataKinds
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import qualified Control.Monad.Foil as Foil
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Control.Monad.Free.Foil
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Data.String (fromString)
</code></strong></pre></div><a href="#g:1" id="g:1"><h1>Standard Types</h1></a><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Term" class="def">Term</a> = <a href="Language-SOAS-Impl-Generated.html#t:Term-39-" title="Language.SOAS.Impl.Generated">Term'</a> <a href="Language-SOAS-Syntax-Abs.html#t:BNFC-39-Position" title="Language.SOAS.Syntax.Abs">BNFC'Position</a> <a href="src/Language.SOAS.Impl.html#Term" class="link">Source</a> <a href="#t:Term" class="selflink">#</a></p><div class="doc"><p>Standard terms with source code location annotations.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Type" class="def">Type</a> = <a href="Language-SOAS-Impl-Generated.html#t:Type-39-" title="Language.SOAS.Impl.Generated">Type'</a> <a href="Language-SOAS-Syntax-Abs.html#t:BNFC-39-Position" title="Language.SOAS.Syntax.Abs">BNFC'Position</a> <a href="src/Language.SOAS.Impl.html#Type" class="link">Source</a> <a href="#t:Type" class="selflink">#</a></p><div class="doc"><p>Standard types with source code location annotations.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Subst" class="def">Subst</a> = <a href="Language-SOAS-Impl-Generated.html#t:Subst-39-" title="Language.SOAS.Impl.Generated">Subst'</a> <a href="Language-SOAS-Syntax-Abs.html#t:BNFC-39-Position" title="Language.SOAS.Syntax.Abs">BNFC'Position</a> '<a href="../free-foil-0.2.0/Control-Monad-Foil-Internal.html#v:VoidS" title="Control.Monad.Foil.Internal">VoidS</a> <a href="src/Language.SOAS.Impl.html#Subst" class="link">Source</a> <a href="#t:Subst" class="selflink">#</a></p><div class="doc"><p>Standard metavariable substitutions with source code location annotations.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Constraint" class="def">Constraint</a> = <a href="Language-SOAS-Impl-Generated.html#t:Constraint-39-" title="Language.SOAS.Impl.Generated">Constraint'</a> <a href="Language-SOAS-Syntax-Abs.html#t:BNFC-39-Position" title="Language.SOAS.Syntax.Abs">BNFC'Position</a> '<a href="../free-foil-0.2.0/Control-Monad-Foil-Internal.html#v:VoidS" title="Control.Monad.Foil.Internal">VoidS</a> <a href="src/Language.SOAS.Impl.html#Constraint" class="link">Source</a> <a href="#t:Constraint" class="selflink">#</a></p><div class="doc"><p>Standard unification constraints with source code location annotations.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:OpTyping" class="def">OpTyping</a> = <a href="Language-SOAS-Impl-Generated.html#t:OpTyping-39-" title="Language.SOAS.Impl.Generated">OpTyping'</a> <a href="Language-SOAS-Syntax-Abs.html#t:BNFC-39-Position" title="Language.SOAS.Syntax.Abs">BNFC'Position</a> '<a href="../free-foil-0.2.0/Control-Monad-Foil-Internal.html#v:VoidS" title="Control.Monad.Foil.Internal">VoidS</a> <a href="src/Language.SOAS.Impl.html#OpTyping" class="link">Source</a> <a href="#t:OpTyping" class="selflink">#</a></p><div class="doc"><p>Standard operator typings with source code location annotations.</p></div></div><a href="#g:2" id="g:2"><h1>Metavariable substitutions</h1></a><div class="top"><p class="src"><a id="v:lookupSubst" class="def">lookupSubst</a> :: <a href="Language-SOAS-Syntax-Abs.html#t:MetaVarIdent" title="Language.SOAS.Syntax.Abs">MetaVarIdent</a> -&gt; [<a href="Language-SOAS-Impl.html#t:Subst" title="Language.SOAS.Impl">Subst</a>] -&gt; <a href="../base-4.19.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="Language-SOAS-Impl.html#t:Subst" title="Language.SOAS.Impl">Subst</a> <a href="src/Language.SOAS.Impl.html#lookupSubst" class="link">Source</a> <a href="#v:lookupSubst" class="selflink">#</a></p><div class="doc"><p>Lookup a substitution by its <code><a href="Raw.html#v:MetaVarIdent" title="Raw">MetaVarIdent</a></code>.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>lookupSubst &quot;?m&quot; [&quot;?n[] &#8614; Zero()&quot;, &quot;?m[x y] &#8614; App(y, x)&quot;]
</code></strong>Just ?m [x0 x1] &#8614; App (x1, x0)
</pre></div></div><div class="top"><p class="src"><a id="v:applySubsts" class="def">applySubsts</a> :: <span class="keyword">forall</span> (n :: <a href="../free-foil-0.2.0/Control-Monad-Foil-Internal.html#t:S" title="Control.Monad.Foil.Internal">S</a>). <a href="../free-foil-0.2.0/Control-Monad-Foil-Internal.html#t:Distinct" title="Control.Monad.Foil.Internal">Distinct</a> n =&gt; <a href="../free-foil-0.2.0/Control-Monad-Foil-Internal.html#t:Scope" title="Control.Monad.Foil.Internal">Scope</a> n -&gt; [<a href="Language-SOAS-Impl.html#t:Subst" title="Language.SOAS.Impl">Subst</a>] -&gt; <a href="Language-SOAS-Impl.html#t:Term" title="Language.SOAS.Impl">Term</a> n -&gt; <a href="Language-SOAS-Impl.html#t:Term" title="Language.SOAS.Impl">Term</a> n <a href="src/Language.SOAS.Impl.html#applySubsts" class="link">Source</a> <a href="#v:applySubsts" class="selflink">#</a></p><div class="doc"><p>Apply meta variable substitutions to a term.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>applySubsts Foil.emptyScope [&quot;?m[x y] &#8614; Lam(z. App(z, App(x, y)))&quot;] &quot;Lam(x. ?m[App(x, ?m[x, x]), x])&quot;
</code></strong>Lam (x0 . Lam (x2 . App (x2, App (App (x0, Lam (x2 . App (x2, App (x0, x0)))), x0))))
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>applySubsts Foil.emptyScope [&quot;?m[x y] &#8614; App(y, x)&quot;] &quot;Lam(f. Lam(x. ?m[?m[x, f], f]))&quot;
</code></strong>Lam (x0 . Lam (x1 . App (x0, App (x0, x1))))
</pre></div></div><div class="top"><p class="src"><a id="v:isSolutionFor" class="def">isSolutionFor</a> :: [<a href="Language-SOAS-Impl.html#t:Subst" title="Language.SOAS.Impl">Subst</a>] -&gt; [<a href="Language-SOAS-Impl.html#t:Constraint" title="Language.SOAS.Impl">Constraint</a>] -&gt; <a href="../base-4.19.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Language.SOAS.Impl.html#isSolutionFor" class="link">Source</a> <a href="#v:isSolutionFor" class="selflink">#</a></p><div class="doc"><p>Check if a (simultaneous) substitution is a solution to a set of constraints:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>isSolutionFor [&quot;?m[x y] &#8614; App(y, x)&quot;] [&quot;&#8704; f x. ?m[?m[x, f], f] = App(f, App(f, x))&quot;]
</code></strong>True
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>isSolutionFor [&quot;?m[x y] &#8614; App(y, x)&quot;] [&quot;&#8704; f x y. ?m[?m[x, f], f] = App(f, App(f, y))&quot;]
</code></strong>False
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>isSolutionFor [&quot;?m[x] &#8614; Lam(f. App(f, x))&quot;] [&quot;&#8704; x. ?m[?m[x]] = Lam(f. App(f, Lam(f. App(f, x))))&quot;]
</code></strong>True
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>isSolutionFor [&quot;?m[x] &#8614; Lam(f. App(f, x))&quot;] [&quot;&#8704; y x. ?m[?m[x]] = Lam(f. App(f, Lam(f. App(f, y))))&quot;]
</code></strong>False
</pre></div></div><a href="#g:3" id="g:3"><h1>Entrypoint</h1></a><div class="top"><p class="src"><a id="v:defaultMain" class="def">defaultMain</a> :: <a href="../base-4.19.1.0/System-IO.html#t:IO" title="System.IO">IO</a> () <a href="src/Language.SOAS.Impl.html#defaultMain" class="link">Source</a> <a href="#v:defaultMain" class="selflink">#</a></p><div class="doc"><p>A SOAS interpreter implemented via the free foil.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.30.0</p></div></body></html>